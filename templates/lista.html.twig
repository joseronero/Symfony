
{% extends 'layaout.html.twig' %}
{% block body %}
 {{parent()}}     
<div style="margin-left: auto; margin-right: auto;">
    <h2 class="ui dividing header">Lista de usuarios</h2>
    <div class="ui ribbon blue label">
    Total registros: {{pagination.getTotalItemCount}}
    </div>
    <form method="post" name="search" action="" role="search">
        <div class="ui category search">
            <div class="ui icon input">
                <input class="prompt" name="query" value="{{app.request.get('query')}}" placeholder="Buscar registro..." type="text" >
                <i class="search icon"></i>
            </div>
                <div class="results"></div>    
        </div>
    </form> 
    {%if not pagination|length %}
       <h2 class="ui header">No existen usuarios con esos par&aacutemetros de b&uacutesqueda</h2>
    {%endif%}
    {%if pagination|length %}
    <table class= "ui collapsing  celled table" border="1">
        <thead>
            <tr>
                <th>{{knp_pagination_sortable(pagination, 'Username','u.username')}}</th> 
                <th>{{knp_pagination_sortable(pagination, 'Nombre','u.firstName')}}</th> 
                <th>{{knp_pagination_sortable(pagination, 'Apellidos','u.lastName')}}</th> 
                <th>{{knp_pagination_sortable(pagination, 'Email','u.email')}}</th> 
                <th>{{knp_pagination_sortable(pagination, 'Rol','u.role')}}</th>
                <th>{{knp_pagination_sortable(pagination, 'Activo','u.isActive')}}</th>
                <th>Acci&oacute;n</th>
            </tr>
        </thead>
        <tbody>
            {% for user in pagination %}
                <tr>
                    <td>{{user.username}}</td>
                    <td>{{user.firstName}} </td>
                    <td>{{user.lastName}} </td>
                    <td>{{user.email}}</td>
                    <td>
                        {% if user.role == 'ROLE_ADMIN' %}
                            <strong>Administrador</strong>
                        {% elseif user.role == 'ROLE_USER' %}
                            <strong>Usuario</strong>
                        {% endif %}                  
                    </td>
                    <td>
                        {% if user.isActive == '1' %}
                            <strong>Si</strong>
                        {% elseif user.isActive == '0' %}
                            <strong>No</strong>
                        {% endif %}                   
                    </td>
                   
                    <td class="actions">
                        <a href="{{ path('_ver_usuario', {id: user.id}) }}" class="ui green basic button">Ver</a>
                        <a href="{{ path('_editar_usuario', {id: user.id}) }}" class="ui orange basic button">Editar</a>    
                        <a href="{{ path('_borrar_usuario_listado', {id: user.id}) }}" id="enlace_{{user.id}}" class="ui red basic button">Borrar</a>             
                    </td>                     
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {%endif%}    
    <div>
        {{knp_pagination_render(pagination)}}
    </div>    
</div>

<div class="ui small modal">
  <div class="ui icon header">
    <i class="exclamation circle icon"></i>
    Atención
  </div>
  <div class="content">
    <p>Va a borrar el usuario, ¿Estás seguro?</p>
  </div>
  <div class="actions">
    <div class="ui black deny button">No</div>  
    <div class="ui positive button">
    Si
    <i class="checkmark icon"></i>
    </div>   
  </div>
</div>
        
          
{%endblock%}
